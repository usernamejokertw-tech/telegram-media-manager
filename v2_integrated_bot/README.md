# V2: Integrated Bot (雙核心整合版)

這是本專案的最終型態，採用 **Dual-Client (UserBot + Bot API)** 架構。
將原本分散的掃描與播放功能整合為一，並提供更完整的群組管理功能。

## 🌟 核心特色

- **無縫整合**: 一個程式 (`bot.py`) 同時處理後台掃描與前台互動。
- **動態監控**: 透過 `/add` 指令，直接在 TG 上轉發連結即可加入監控名單。
- **增量更新**: `/update` 指令只掃描新訊息，速度極快。
- **資料維護**: `/refresh` 指令可檢查失效連結與 Topic 改名。
- **活躍報表**: `/record` 視覺化顯示各群組的更新狀況。

## 📂 檔案結構

- `bot.py`: **[主程式]** 程式入口，負責介面邏輯與指令處理。
- `scanner_lib.py`: **[核心庫]** 負責爬蟲、解析連結、資料庫讀寫。

## 🚀 指令列表

| 指令       | 功能     | 說明                                    |
| :--------- | :------- | :-------------------------------------- |
| `/video`   | 影音中心 | (原 /start) 叫出隨機播放與收藏面板      |
| `/add`     | 監控錄入 | 開啟後，轉發群組連結給 Bot 即可加入名單 |
| `/update`  | 增量同步 | 快速掃描所有監控群組的新訊息            |
| `/refresh` | 群組維護 | (複選單) 清理失效資源與同步 Topic 名稱  |
| `/record`  | 活躍報表 | 顯示各群組的最新動態與資源數量          |
| `/close`   | 安全關閉 | 清理 Bot 對話紀錄並安全終止程式         |

## ⚙️ 使用方法

1. 確保 `config.py` 與 `tag.json` 已設定完成。
2. 啟動程式：
   ```bash
   python bot.py
   ```
3. 私訊 Bot 輸入 /video 開始看片，或輸入 /add 開始加入新群組。
